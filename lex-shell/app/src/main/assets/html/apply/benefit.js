!function(t){var e={};function a(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=9)}({0:function(t,e,a){"use strict";var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();var n=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,React.Component),r(e,[{key:"componentWillMount",value:function(){this.state={raw:{ml:80,mr:40,mt:80,mb:130,w:this.props.size,h:this.props.size/3*2,m:5,bar:20,barm:50,font:24,text:24},pos:0,chart:{age:0,data:[]}}}},{key:"componentDidMount",value:function(){var t=this.props.chart;this.state.axis=this.state.raw,this.state.ctx=document.getElementById(this.props.id).getContext("2d"),this.state.ctx.lineCap="round",this.state.ctx.lineJoin="round",t?(t.content.data.map(function(t){for(var e=0;e<t.data.length;e++)t.data[e]=Math.round(t.data[e])}),this.state.chart=t.content,this.setState({productName:t.productName,chart:this.state.chart})):(this.state.chart={age:0,data:[]},this.setState({productName:"",chart:this.state.chart}))}},{key:"draw",value:function(t){var e=this.state.axis,a=this.state.ctx;a.clearRect(0,0,e.w,e.h);var r=this.measure(this.state.chart.data),n=e.ml,i=e.h-e.mb,o=e.w-e.mr-e.ml,l=e.h-e.mb-e.mt;a.lineDash=null,a.lineWidth=1,a.beginPath(),a.moveTo(n,i-l),a.lineTo(n,i),a.lineTo(n+o,i),a.font=e.font+"px Arial",a.textAlign="right",a.textBaseline="middle",a.fillText("万",n,e.mt/2);for(var c=0;c<=10;c++){a.moveTo(n,i-l*c/10),a.lineTo(n-e.m,i-l*c/10);var s=r.y*c/10/1e4;s=s<10?s.toFixed(1):Math.round(s),a.fillText(s,n-e.m-1,i-l*c/10)}a.textAlign="center",a.textBaseline="top";for(var h=0;h<r.x;h+=Math.ceil(r.x/10))a.moveTo(n+o*h/(r.x-1),i),a.lineTo(n+o*h/(r.x-1),i+e.m),a.fillText(this.state.chart.age+h,n+o*h/r.x,i+e.m);a.strokeStyle="Black",a.stroke(),a.lineWidth=3,this.state.chart.data.map(function(t){if("text"!=t.type){a.beginPath();for(var e=0;e<r.x;e++){var c=n+e*o/(r.x-1);0==e?a.moveTo(c,i-t.data[e]*l/r.y):a.lineTo(c,i-t.data[e]*l/r.y)}a.strokeStyle="#"+t.color,a.stroke()}}),a.textAlign="left",a.textBaseline="middle";var u=e.w-e.mr,f=e.mt/2;this.state.chart.data.map(function(t){if("text"!=t.type){a.fillStyle="#"+t.color;var r=a.measureText(t.name).width+e.m+e.bar;u<e.ml+r&&(u=e.w-e.mr,f+=e.bar+10),u-=r-e.m,a.fillText(t.name,u+e.bar+e.m,f),a.fillRect(u,f-e.bar/2,e.bar,e.bar)}});var p=-1;if(t){for(var d=0;d<r.x;d++){var m=n+d*o/(r.x-1);if(Math.abs(t-m)<o/r.x/2){p=d;break}}t>n+o?p=r.x-1:t<n&&(p=0)}if(a.lineWidth=1,this.state.chart.data.map(function(t){if("text"!=t.type)for(var e=5;e<r.x;e+=5)a.beginPath(),a.arc(n+e*o/(r.x-1),i-t.data[e]*l/r.y,2,0,2*Math.PI),a.fillStyle="White",a.fill(),a.strokeStyle="#"+t.color,a.stroke()}),a.fillStyle="LightGray",a.fillRect(n,e.h-e.barm-e.bar,o,e.bar),a.textAlign="center",a.textBaseline="middle",a.fillStyle="Black",a.font=e.text+"px",a.fillText("年龄",n/2,e.h-e.barm-e.bar/2),p>=0){var x=n+p*o/(r.x-1);a.beginPath(),a.lineDash=[4,4],a.lineDashOffset=e.m,a.moveTo(x,0),a.lineTo(x,e.h-e.barm-e.bar),this.state.chart.data.map(function(t){if("text"!=t.type){var e=i-t.data[p]*l/r.y;a.moveTo(x,e),a.lineTo(n,e)}}),a.strokeStyle="Gray",a.stroke(),a.fillStyle="ForestGreen",a.fillRect(n,e.h-e.barm-e.bar,x-n,e.bar),a.textAlign="center",a.textBaseline="top",a.fillStyle="Black",a.fillText(this.state.chart.age+p+"岁",x,e.h-e.barm)}p>=0&&this.setState({pos:p})}},{key:"measure",value:function(t){var e=10,a=2;return t.map(function(t){"text"!=t.type&&(t.data.map(function(t){e<t&&(e=t)}),a<t.data.length&&(a=t.data.length))}),{x:a,y:e}}},{key:"translate",value:function(t){var e=750/t.w,a={};for(var r in t)a[r]=t[r]*e;return a}},{key:"onTouch",value:function(t){this.draw(t.changedTouches[0].clientX)}},{key:"render",value:function(){var t=this,e=this.state.pos,a="130px",r=(this.props.size>1e3?150:120)+"px";return React.createElement("div",{className:"text13 center"},React.createElement("canvas",{id:this.props.id,style:{marginLeft:"5px",width:this.props.size-30+"px",height:this.props.size/3*2+"px"},width:this.props.size,height:this.props.size/3*2,onTouchStart:this.onTouch.bind(this),onTouchMove:this.onTouch.bind(this)}),React.createElement("div",{style:{display:"flex",marginLeft:"10px",lineHeight:"50px"}},React.createElement("div",{style:{width:a}},"保单年度"),this.props.years.map(function(t){return React.createElement("div",{style:{width:r,color:0==t?"#008800":"#aaaaaa"}},e+t>=0?"第"+(e+t+1)+"年":"")})),React.createElement("div",{style:{display:"flex",marginLeft:"10px",lineHeight:"50px"}},React.createElement("div",{style:{width:a}},"期初年龄"),this.props.years.map(function(a){return React.createElement("div",{style:{width:r,color:0==a?"#008800":"#aaaaaa"}},e+a>=0?t.state.chart.age+e+a+"岁":"")})),this.state.chart.data.map(function(n,i){return React.createElement("div",{style:{display:"flex",flexDirection:"column",lineHeight:"50px"}},React.createElement("div",{style:{display:"flex",marginLeft:"10px"}},React.createElement("div",{style:{width:a}},n.name),t.props.years.map(function(t){return React.createElement("div",{style:{width:r,color:0==t?"#008800":"#aaaaaa"}},e+t>=0&&e+t<n.data.length?n.data[e+t]:"")})))}),React.createElement("div",{style:{height:"30px"}}))}}]),e}();t.exports=n},9:function(t,e,a){"use strict";var r,n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),i=a(0),o=(r=i)&&r.__esModule?r:{default:r};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}!function(t){function e(){l(this,e);var t=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={raw:{ml:80,mr:40,mt:80,mb:130,w:750,h:550,m:5,bar:20,barm:50,font:24,text:24},pos:0,chart:{age:0,data:[]}},t}s(e,React.Component),n(e,[{key:"componentDidMount",value:function(){var t=this.props.chart;this.state.axis=this.state.raw,this.state.ctx=document.getElementById(this.props.id).getContext("2d"),this.state.ctx.lineCap="round",this.state.ctx.lineJoin="round",t?(t.content.data.map(function(t){for(var e=0;e<t.data.length;e++)t.data[e]=Math.round(t.data[e])}),this.state.chart=t.content,this.setState({productName:t.productName,chart:this.state.chart})):(this.state.chart={age:0,data:[]},this.setState({productName:"",chart:this.state.chart}))}},{key:"draw",value:function(t){var e=this.state.axis,a=this.state.ctx;a.clearRect(0,0,e.w,e.h);var r=this.measure(this.state.chart.data),n=e.ml,i=e.h-e.mb,o=e.w-e.mr-e.ml,l=e.h-e.mb-e.mt;a.lineDash=null,a.lineWidth=1,a.beginPath(),a.moveTo(n,i-l),a.lineTo(n,i),a.lineTo(n+o,i),a.font=e.font+"px Arial",a.textAlign="right",a.textBaseline="middle",a.fillText("万",n,i-1.1*l);for(var c=0;c<=10;c++){a.moveTo(n,i-l*c/10),a.lineTo(n-e.m,i-l*c/10);var s=r.y*c/10/1e4;s=s<10?s.toFixed(1):Math.round(s),a.fillText(s,n-e.m-1,i-l*c/10)}a.textAlign="center",a.textBaseline="top";for(var h=0;h<r.x;h+=Math.ceil(r.x/10))a.moveTo(n+o*h/(r.x-1),i),a.lineTo(n+o*h/(r.x-1),i+e.m),a.fillText(this.state.chart.age+h,n+o*h/r.x,i+e.m);a.strokeStyle="Black",a.stroke(),a.lineWidth=3,this.state.chart.data.map(function(t){if("text"!=t.type){a.beginPath();for(var e=0;e<r.x;e++){var c=n+e*o/(r.x-1);0==e?a.moveTo(c,i-t.data[e]*l/r.y):a.lineTo(c,i-t.data[e]*l/r.y)}a.strokeStyle="#"+t.color,a.stroke()}}),a.textAlign="right",a.textBaseline="middle";var u=e.w-e.mr;this.state.chart.data.map(function(t){"text"!=t.type&&(a.fillStyle="#"+t.color,a.fillText(t.name,u,i-1.1*l),u-=a.measureText(t.name).width+e.m+e.bar,a.fillRect(u,i-1.1*l-e.bar/2,e.bar,e.bar),u-=e.m)});var f=-1;if(t){for(var p=0;p<r.x;p++){var d=n+p*o/(r.x-1);if(Math.abs(t-d)<o/r.x/2){f=p;break}}t>n+o?f=r.x-1:t<n&&(f=0)}if(a.lineWidth=1,this.state.chart.data.map(function(t){if("text"!=t.type)for(var e=5;e<r.x;e+=5)a.beginPath(),a.arc(n+e*o/(r.x-1),i-t.data[e]*l/r.y,2,0,2*Math.PI),a.fillStyle="White",a.fill(),a.strokeStyle="#"+t.color,a.stroke()}),a.fillStyle="LightGray",a.fillRect(n,e.h-e.barm-e.bar,o,e.bar),a.textAlign="center",a.textBaseline="middle",a.fillStyle="Black",a.font=e.text+"px",a.fillText("年龄",n/2,e.h-e.barm-e.bar/2),f>=0){var m=n+f*o/(r.x-1);a.beginPath(),a.lineDash=[4,4],a.lineDashOffset=e.m,a.moveTo(m,0),a.lineTo(m,e.h-e.barm-e.bar),this.state.chart.data.map(function(t){if("text"!=t.type){var e=i-t.data[f]*l/r.y;a.moveTo(m,e),a.lineTo(n,e)}}),a.strokeStyle="Gray",a.stroke(),a.fillStyle="ForestGreen",a.fillRect(n,e.h-e.barm-e.bar,m-n,e.bar),a.textAlign="center",a.textBaseline="top",a.fillStyle="Black",a.fillText(this.state.chart.age+f+"岁",m,e.h-e.barm)}f>=0&&this.setState({pos:f})}},{key:"measure",value:function(t){var e=10,a=2;return t.map(function(t){"text"!=t.type&&(t.data.map(function(t){e<t&&(e=t)}),a<t.data.length&&(a=t.data.length))}),{x:a,y:e}}},{key:"translate",value:function(t){var e=750/t.w,a={};for(var r in t)a[r]=t[r]*e;return a}},{key:"onTouch",value:function(t){this.draw(t.changedTouches[0].clientX)}},{key:"render",value:function(){var t=this,e=this.state.pos;return React.createElement("div",{className:"text13",style:{backgroundColor:"#fff",textAlign:"center"}},React.createElement("div",{class:"eclipse text18",style:{width:"690px",textAlign:"center",marginLeft:"30px",height:"80px",lineHeight:"80px",borderBottom:"#ddd solid 1px"}},this.state.productName),React.createElement("canvas",{id:this.props.id,style:{width:SIZE+"px",height:SIZE/3*2+"px"},width:"750",height:"550",onTouchStart:this.onTouch.bind(this),onTouchMove:this.onTouch.bind(this)}),React.createElement("div",{style:{display:"flex",marginLeft:"20px",lineHeight:"50px"}},React.createElement("div",{style:{width:"110px"}},"保单年度"),this.props.years.map(function(t){return React.createElement("div",{style:{width:"120px",color:0==t?"#008800":"#aaaaaa"}},e+t>=0?"第"+(e+t+1)+"年":"")})),React.createElement("div",{style:{display:"flex",marginLeft:"20px",lineHeight:"50px"}},React.createElement("div",{style:{width:"110px"}},"期初年龄"),this.props.years.map(function(a){return React.createElement("div",{style:{width:"120px",color:0==a?"#008800":"#aaaaaa"}},e+a>=0?t.state.chart.age+e+a+"岁":"")})),this.state.chart.data.map(function(a,r){return React.createElement("div",{style:{display:"flex",flexDirection:"column",lineHeight:"50px"}},React.createElement("div",{style:{display:"flex",marginLeft:"20px"}},React.createElement("div",{style:{width:"110px"}},a.name),t.props.years.map(function(t){return React.createElement("div",{style:{width:"120px",color:0==t?"#008800":"#aaaaaa"}},e+t>=0&&e+t<a.data.length?a.data[e+t]:"")})))}),React.createElement("div",{style:{height:"30px"}}))}}])}();var h=function(t){function e(){l(this,e);var t=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={planId:common.param("planId"),mode:0,tabs:["利益图表","责任条款"],coverage:[],chart:[]},t}return s(e,React.Component),n(e,[{key:"componentDidMount",value:function(){var t=this;MF.setTitle("利益演示"),APP.apply.format(this.state.planId,"coverage,benefit_chart",function(e){t.setState({coverage:e.coverage,chart:e.benefit_chart},t.onRepaint)})}},{key:"onModeSwitch",value:function(t){this.setState({mode:t},this.onRepaint)}},{key:"onRepaint",value:function(){if(0==this.state.mode)for(var t=0;t<this.state.chart.length;t++){var e=this.refs["benefitChart"+t];e&&e.draw(400)}}},{key:"render",value:function(){var t=this;return React.createElement("div",null,React.createElement("div",{style:{display:"flex",width:"100%",position:"fixed",zIndex:"50",top:"0",backgroundColor:"#e6e6e6"}},this.state.tabs.map(function(e,a){return React.createElement("div",{className:"tab "+(a==t.state.mode?"tab-focus":"tab-blur"),key:a,style:{width:"250px"},onClick:t.onModeSwitch.bind(t,a)},React.createElement("text",{className:"text18"},e))})),1==this.state.mode?React.createElement("div",{style:{marginTop:"80px"}},this.state.coverage.map(function(t,e){return React.createElement("div",{className:"pl-2 pr-2 bg-white"},React.createElement("div",{style:{marginTop:(0!=e?10:0)+"px"}},React.createElement("div",{className:"text17 eclipse",style:{width:SIZE-60+"px",textAlign:"center",padding:"10px",lineHeight:"60px",borderBottom:"#ddd solid 1px"}},t.productName)),t.content.map(function(t,e){return React.createElement("div",{style:{background:"#fff"}},React.createElement("div",null,React.createElement("text",{className:"text17",style:{margin:"10px",lineHeight:"60px"}},"● ",t.title)),t.content.map(function(t,e){return React.createElement("div",{className:"text16"},"　　",t.text)}),React.createElement("div",{style:{height:"10px"}}))}),React.createElement("div",{style:{height:"10px"}}))})):0==this.state.mode?React.createElement("div",{style:{marginTop:"80px"}},this.state.chart.map(function(t,e){return null==t.content?null:React.createElement("div",{style:{display:"flex",flexDirection:"column"}},React.createElement(o.default,{size:SIZE,ref:"benefitChart"+e,id:"benefitChart"+e,chart:t,years:SIZE>1e3?[-4,-3,-2,-1,0,1,2,3,4]:[-2,-1,0,1,2]}),React.createElement("div",{style:{height:"10px",backgroundColor:"#e6e6e6"}}))})):null)}}]),e}();$(document).ready(function(){ReactDOM.render(React.createElement(h,null),document.getElementById("root"))})}});